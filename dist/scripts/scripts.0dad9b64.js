"use strict";function sprintf(){var a=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,b=arguments,c=0,d=b[c++],e=function(a,b,c,d){c||(c=" ");var e=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+e:e+a},f=function(a,b,c,d,f,g){var h=d-a.length;return h>0&&(a=c||!f?e(a,d,g,c):a.slice(0,b.length)+e("",h,"0",!0)+a.slice(b.length)),a},g=function(a,b,c,d,g,h,i){var j=a>>>0;return c=c&&j&&{2:"0b",8:"0",16:"0x"}[b]||"",a=c+e(j.toString(b),h||0,"0",!1),f(a,c,d,g,i)},h=function(a,b,c,d,e,g){return null!=d&&(a=a.slice(0,d)),f(a,"",b,c,e,g)},i=function(a,d,i,j,k,l,m){var n,o,p,q,r;if("%%"==a)return"%";for(var s=!1,t="",u=!1,v=!1,w=" ",x=i.length,y=0;i&&x>y;y++)switch(i.charAt(y)){case" ":t=" ";break;case"+":t="+";break;case"-":s=!0;break;case"'":w=i.charAt(y+1);break;case"0":u=!0;break;case"#":v=!0}if(j=j?"*"==j?+b[c++]:"*"==j.charAt(0)?+b[j.slice(1,-1)]:+j:0,0>j&&(j=-j,s=!0),!isFinite(j))throw new Error("sprintf: (minimum-)width must be finite");switch(l=l?"*"==l?+b[c++]:"*"==l.charAt(0)?+b[l.slice(1,-1)]:+l:"fFeE".indexOf(m)>-1?6:"d"==m?0:void 0,r=d?b[d.slice(0,-1)]:b[c++],m){case"s":return h(String(r),s,j,l,u,w);case"c":return h(String.fromCharCode(+r),s,j,l,u);case"b":return g(r,2,v,s,j,l,u);case"o":return g(r,8,v,s,j,l,u);case"x":return g(r,16,v,s,j,l,u);case"X":return g(r,16,v,s,j,l,u).toUpperCase();case"u":return g(r,10,v,s,j,l,u);case"i":case"d":return n=parseInt(+r),o=0>n?"-":t,r=o+e(String(Math.abs(n)),l,"0",!1),f(r,o,s,j,u);case"e":case"E":case"f":case"F":case"g":case"G":return n=+r,o=0>n?"-":t,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())],q=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2],r=o+Math.abs(n)[p](l),f(r,o,s,j,u)[q]();default:return a}};return d.replace(a,i)}var app=angular.module("Constants",[]);app.constant("APPLICATION",{host:"https://ec2-54-148-52-34.us-west-2.compute.amazonaws.com/mifosng-provider/",sessionName:"ang_session",authToken:"token",username:"username",role:"role",PAGE_SIZE:5,DISPLAYED_PAGES:5}),app.constant("REST_URL",{AUTHENTICATION:"api/v1/authentication",DASHBOARD_HEADER_STATISTIC:"api/v1/runreports/Home page header statistic",ALL_CLIENTS:"api/v1/runreports/PageClientsScreenClients",LOANS:"api/v1/runreports/PageClientsScreenLoans",LOANS_PENDING_APPROVALS:"api/v1/runreports/PageClientsScreenLoansPA",LOANS_AWAITING_DISBURSEMENT:"api/v1/runreports/PageClientsScreenLoansAD",LOANS_REJECTED:"api/v1/runreports/PageClientsScreenLoansRejected",LOANS_WRITTEN_OFF:"api/v1/runreports/PageClientsScreenLoansWritten"}),app.constant("PAGE_URL",{ROOT:"/",DASHBOARD:"/dashboard",CLIENTS:"/clients",LOANS:"/loans",LOANSAWAITINGDISBURSEMENT:"/loansAwaitingDisbursement",LOANSPENDINGAPPROVAL:"/loansPendingApproval",LOANSREJECTED:"/loansRejected",LOANSWRITTENOFF:"/loansWrittenOff"}),app.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}),app.constant("USER_ROLES",{all:"*",admin:"admin",user:"user",guest:"guest"}),app.constant("CHART_TYPE",{ACTIVE_BORROWERS:"activeBorrowers",PAR_PER_LOAN:"parPerLoan",LOANPORTFOLIO_UPDATES:"changesInLoanPortfolio"}),function(a,b,c){c.module("googlechart",[]).value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var a="https:",b="//www.google.com/jsapi";this.setProtocol=function(b){a=b},this.setUrl=function(a){b=a},this.$get=function(){return(a?a:"")+b}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(d,e,f,g){var h=e.defer(),i=function(){var a={callback:function(){var a=f.optionalSettings.callback;d.$apply(function(){h.resolve()}),c.isFunction(a)&&a.call(this)}};a=c.extend({},f.optionalSettings,a),b.google.load("visualization",f.version,a)},j=a.getElementsByTagName("head")[0],k=a.createElement("script");return k.setAttribute("type","text/javascript"),k.src=g,k.addEventListener?k.addEventListener("load",i,!1):k.onreadystatechange=function(){("loaded"===k.readyState||"complete"===k.readyState)&&(k.onreadystatechange=null,i())},j.appendChild(k),h.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(a,b,d,e){return{restrict:"A",scope:{beforeDraw:"&",chart:"=chart",onReady:"&",onSelect:"&",select:"&"},link:function(b,f,g){function h(a,d,e){if("undefined"!=typeof b.chart.formatters[a]){if(!c.equals(b.chart.formatters[a],b.oldChartFormatters[a]))if(b.oldChartFormatters[a]=b.chart.formatters[a],b.formatters[a]=[],"color"===a)for(var f=0;f<b.chart.formatters[a].length;f++){var g=new d;for(i=0;i<b.chart.formatters[a][f].formats.length;i++){var h=b.chart.formatters[a][f].formats[i];"undefined"!=typeof h.fromBgColor&&"undefined"!=typeof h.toBgColor?g.addGradientRange(h.from,h.to,h.color,h.fromBgColor,h.toBgColor):g.addRange(h.from,h.to,h.color,h.bgcolor)}b.formatters[a].push(g)}else for(var i=0;i<b.chart.formatters[a].length;i++)b.formatters[a].push(new d(b.chart.formatters[a][i]));for(i=0;i<b.formatters[a].length;i++)b.chart.formatters[a][i].columnNum<e.getNumberOfColumns()&&b.formatters[a][i].format(e,b.chart.formatters[a][i].columnNum);("arrow"===a||"bar"===a||"color"===a)&&(b.chart.options.allowHtml=!0)}}function i(){i.triggered||void 0==b.chart||(i.triggered=!0,a(function(){if("undefined"==typeof b.chartWrapper){var c={chartType:b.chart.type,dataTable:b.chart.data,view:b.chart.view,options:b.chart.options,containerId:f[0]};b.chartWrapper=new google.visualization.ChartWrapper(c),google.visualization.events.addListener(b.chartWrapper,"ready",function(){b.chart.displayed=!0,b.$apply(function(a){a.onReady({chartWrapper:a.chartWrapper})})}),google.visualization.events.addListener(b.chartWrapper,"error",function(a){console.log("Chart not displayed due to error: "+a.message+". Full error object follows."),console.log(a)}),google.visualization.events.addListener(b.chartWrapper,"select",function(){var a={selectedItems:b.chartWrapper.getChart().getSelection()};a.selectedItem=a.selectedItems[0],b.$apply(function(){g.select?(console.log("Angular-Google-Chart: The 'select' attribute is deprecated and will be removed in a future release.  Please use 'onSelect'."),b.select(a)):b.onSelect(a)})})}else b.chartWrapper.setChartType(b.chart.type),b.chartWrapper.setDataTable(b.chart.data),b.chartWrapper.setView(b.chart.view),b.chartWrapper.setOptions(b.chart.options);"undefined"==typeof b.formatters&&(b.formatters={}),"undefined"!=typeof b.chart.formatters&&(h("number",google.visualization.NumberFormat,b.chartWrapper.getDataTable()),h("arrow",google.visualization.ArrowFormat,b.chartWrapper.getDataTable()),h("date",google.visualization.DateFormat,b.chartWrapper.getDataTable()),h("bar",google.visualization.BarFormat,b.chartWrapper.getDataTable()),h("color",google.visualization.ColorFormat,b.chartWrapper.getDataTable()));var d=b.chart.customFormatters;if("undefined"!=typeof d)for(var e in d)h(e,d[e],b.chartWrapper.getDataTable());a(function(){b.beforeDraw({chartWrapper:b.chartWrapper}),b.chartWrapper.draw(),i.triggered=!1})},0,!0))}function j(){e.then(function(){i()})}b.$watch(function(){return b.chart?{customFormatters:b.chart.customFormatters,data:b.chart.data,formatters:b.chart.formatters,options:b.chart.options,type:b.chart.type,view:b.chart.view}:b.chart},function(){j()},!0);var k=d.$on("resizeMsg",function(){a(function(){b.chartWrapper&&j()})});b.$on("$destroy",function(){k()}),b.oldChartFormatters={}}}}]).run(["$rootScope","$window",function(a,b){c.element(b).bind("resize",function(){a.$emit("resizeMsg")})}])}(document,window,window.angular),function(a){a.fn.extend({tableExport:function(b){function c(b){var c="";return"true"==e.htmlContent?c=b.html().trim():b.filter(":visible").find("div").size()>0?b.filter(":visible").find("div").each(function(b,d){c+=a(d).text().trim()+" "}):c=b.text().trim(),"true"==e.escape&&(c=escape(c)),c}var d,e={separator:",",ignoreColumn:[],tableName:"yourTableName",type:"csv",pdfFontSize:14,pdfLeftMargin:20,escape:"true",htmlContent:"false",consoleLog:"false"},b=a.extend(e,b),f=this;if("csv"==e.type||"txt"==e.type){var g="";a(f).find("thead").find("tr").each(function(){g+="\n",a(this).filter(":visible").find("th").each(function(b){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)&&(g+='"'+c(a(this))+'"'+e.separator)}),g=a.trim(g),g=a.trim(g).substring(0,g.length-1)}),a(f).find("tbody").find("tr").each(function(){g+="\n",a(this).filter(":visible").find("td").each(function(b){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)&&(g+='"'+c(a(this))+'"'+e.separator)}),g=a.trim(g).substring(0,g.length-1)}),"true"==e.consoleLog&&console.log(g);var h="base64,"+a.base64.encode(g);window.open("data:application/"+e.type+";filename=exportData;"+h)}else if("sql"==e.type){var g="INSERT INTO `"+e.tableName+"` (";a(f).find("thead").find("tr").each(function(){a(this).filter(":visible").find("th").each(function(b){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)&&(g+="`"+c(a(this))+"`,")}),g=a.trim(g),g=a.trim(g).substring(0,g.length-1)}),g+=") VALUES ",a(f).find("tbody").find("tr").each(function(){g+="(",a(this).filter(":visible").find("td").each(function(b){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)&&(g+='"'+c(a(this))+'",')}),g=a.trim(g).substring(0,g.length-1),g+="),"}),g=a.trim(g).substring(0,g.length-1),g+=";","true"==e.consoleLog&&console.log(g);var h="base64,"+a.base64.encode(g);window.open("data:application/sql;filename=exportData;"+h)}else if("json"==e.type){var i=[];a(f).find("thead").find("tr").each(function(){var b=[];a(this).filter(":visible").find("th").each(function(d){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(d)&&b.push(c(a(this)))}),i.push(b)});var j=[];a(f).find("tbody").find("tr").each(function(){var b=[];a(this).filter(":visible").find("td").each(function(d){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(d)&&b.push(c(a(this)))}),j.push(b)});var k=[];k.push({header:i,data:j}),"true"==e.consoleLog&&console.log(JSON.stringify(k));var h="base64,"+a.base64.encode(JSON.stringify(k));window.open("data:application/json;filename=exportData;"+h)}else if("xml"==e.type){var l='<?xml version="1.0" encoding="utf-8"?>';l+="<tabledata><fields>",a(f).find("thead").find("tr").each(function(){a(this).filter(":visible").find("th").each(function(b){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)&&(l+="<field>"+c(a(this))+"</field>")})}),l+="</fields><data>";var m=1;a(f).find("tbody").find("tr").each(function(){l+='<row id="'+m+'">';var b=0;a(this).filter(":visible").find("td").each(function(d){"none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(d)&&(l+="<column-"+b+">"+c(a(this))+"</column-"+b+">"),b++}),m++,l+="</row>"}),l+="</data></tabledata>","true"==e.consoleLog&&console.log(l);var h="base64,"+a.base64.encode(l);window.open("data:application/xml;filename=exportData;"+h)}else if("excel"==e.type||"doc"==e.type||"powerpoint"==e.type){var n="<table>";a(f).find("thead").find("tr:gt(0)").each(function(){n+="<tr>",a(this).filter(":visible").find("th").each(function(){"none"!=a(this).css("display")&&(n+="<td>"+c(a(this))+"</td>")}),n+="</tr>"});var m=1;a(f).find("tbody").find("tr").each(function(){n+="<tr>";var b=0;a(this).filter(":visible").find("td").each(function(d){"none"!=a(this).css("display")&&-1===(""+e.ignoreColumn).indexOf(d)&&(n+="<td>"+c(a(this))+"</td>"),b++}),m++,n+="</tr>"}),n+="</table>","true"==e.consoleLog&&console.log(n);var o="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:"+e.type+"' xmlns='http://www.w3.org/TR/REC-html40'>";o+="<head>",o+="<!--[if gte mso 9]>",o+="<xml>",o+="<x:ExcelWorkbook>",o+="<x:ExcelWorksheets>",o+="<x:ExcelWorksheet>",o+="<x:Name>",o+="{worksheet}",o+="</x:Name>",o+="<x:WorksheetOptions>",o+="<x:DisplayGridlines/>",o+="</x:WorksheetOptions>",o+="</x:ExcelWorksheet>",o+="</x:ExcelWorksheets>",o+="</x:ExcelWorkbook>",o+="</xml>",o+="<![endif]-->",o+="</head>",o+="<body>",o+=n,o+="</body>",o+="</html>";var h="base64,"+a.base64.encode(o);window.open("data:application/vnd.ms-"+e.type+";filename=exportData.doc;"+h)}else if("png"==e.type)html2canvas(a(f),{onrendered:function(a){var b=a.toDataURL("image/png");window.open(b)}});else if("pdf"==e.type){var p=new jsPDF("p","pt","a4",!0);p.setFontSize(e.pdfFontSize);var q=e.pdfLeftMargin;a(f).find("thead").find("tr:gt(0)").each(function(){a(this).filter(":visible").find("th").each(function(b){if("none"!=a(this).css("display")){var d=q+37*b;p.text(d,20,c(a(this)))}})});var r=20,s=1,t=0;a(f).find("tbody").find("tr").each(function(b){d=b+1,d%26==0&&(p.addPage(),s++,r+=10),t=r+10*d-280*(s-1),a(this).filter(":visible").find("td").each(function(b){if("none"!=a(this).css("display")&&-1==e.ignoreColumn.indexOf(b)){var d=0;d=e.ignoreColumn.length>1?q+37*(b-(e.ignoreColumn.length-1)):1==e.ignoreColumn.length?q+37*(b-e.ignoreColumn.length):q+37*b,p.text(d,t,c(a(this)))}})}),p.output("datauri")}}})}(jQuery),jQuery.base64=function(){function a(a,b){var c=f.indexOf(a.charAt(b));if(-1===c)throw"Cannot decode base64";return c}function b(b){var c,d,f=0,g=b.length,h=[];if(b=String(b),0===g)return b;if(g%4!==0)throw"Cannot decode base64";for(b.charAt(g-1)===e&&(f=1,b.charAt(g-2)===e&&(f=2),g-=4),c=0;g>c;c+=4)d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6|a(b,c+3),h.push(String.fromCharCode(d>>16,d>>8&255,255&d));switch(f){case 1:d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6,h.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=a(b,c)<<18|a(b,c+1)<<12,h.push(String.fromCharCode(d>>16))}return h.join("")}function c(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function d(a){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";a=String(a);var b,d,g=[],h=a.length-a.length%3;if(0===a.length)return a;for(b=0;h>b;b+=3)d=c(a,b)<<16|c(a,b+1)<<8|c(a,b+2),g.push(f.charAt(d>>18)),g.push(f.charAt(d>>12&63)),g.push(f.charAt(d>>6&63)),g.push(f.charAt(63&d));switch(a.length-h){case 1:d=c(a,b)<<16,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+e+e);break;case 2:d=c(a,b)<<16|c(a,b+1)<<8,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+f.charAt(d>>6&63)+e)}return g.join("")}var e="=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="1.0";return{decode:b,encode:d,VERSION:g}}(jQuery);var n,p,i,jsPDF=function(){function a(){J("/Size "+(l+1)),J("/Root "+l+" 0 R"),J("/Info "+(l-1)+" 0 R")}var b,c,d,e,f="20090504",g="",h="1.3",j={a3:[841.89,1190.55],a4:[595.28,841.89],a5:[420.94,595.28],letter:[612,792],legal:[612,1008]},k=0,l=2,m=0,o=new Array,q=new Array,r=.200025,s="mm",t={},u=16,v=16;"pt"==s?d=1:"mm"==s?d=72/25.4:"cm"==s?d=72/2.54:"in"==s&&(d=72);var w=function(){l++,q[l]=g.length,J(l+" 0 obj")},x=function(){J("%PDF-"+h)},y=function(){var a=b*d,e=c*d;for(n=1;k>=n;n++)w(),J("<</Type /Page"),J("/Parent 1 0 R"),J("/Resources 2 0 R"),J("/Contents "+(l+1)+" 0 R>>"),J("endobj"),p=o[n],w(),J("<</Length "+p.length+">>"),z(p),J("endobj");q[1]=g.length,J("1 0 obj"),J("<</Type /Pages");var f="/Kids [";for(i=0;k>i;i++)f+=3+2*i+" 0 R ";J(f+"]"),J("/Count "+k),J(sprintf("/MediaBox [0 0 %.2f %.2f]",a,e)),J(">>"),J("endobj")},z=function(a){J("stream"),J(a),J("endstream")},A=function(){B(),C(),q[2]=g.length,J("2 0 obj"),J("<<"),D(),J(">>"),J("endobj")},B=function(){w(),e=l,name="Helvetica",J("<</Type /Font"),J("/BaseFont /"+name),J("/Subtype /Type1"),J("/Encoding /WinAnsiEncoding"),J(">>"),J("endobj")},C=function(){},D=function(){J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),J("/Font <<"),J("/F1 "+e+" 0 R"),J(">>"),J("/XObject <<"),E(),J(">>")},E=function(){},F=function(){J("/Producer (jsPDF "+f+")"),void 0!=t.title&&J("/Title ("+L(t.title)+")"),void 0!=t.subject&&J("/Subject ("+L(t.subject)+")"),void 0!=t.author&&J("/Author ("+L(t.author)+")"),void 0!=t.keywords&&J("/Keywords ("+L(t.keywords)+")"),void 0!=t.creator&&J("/Creator ("+L(t.creator)+")");var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),g=a.getMinutes(),h=a.getSeconds();J("/CreationDate (D:"+sprintf("%02d%02d%02d%02d%02d%02d",b,c,d,e,g,h)+")")},G=function(){J("/Type /Catalog"),J("/Pages 1 0 R"),J("/OpenAction [3 0 R /FitH null]"),J("/PageLayout /OneColumn")},H=function(){m=1,x(),y(),A(),w(),J("<<"),F(),J(">>"),J("endobj"),w(),J("<<"),G(),J(">>"),J("endobj");var b=g.length;J("xref"),J("0 "+(l+1)),J("0000000000 65535 f ");for(var c=1;l>=c;c++)J(sprintf("%010d 00000 n ",q[c]));J("trailer"),J("<<"),a(),J(">>"),J("startxref"),J(b),J("%%EOF"),m=3},I=function(){k++,m=2,o[k]="",c=j.a4[1]/d,b=j.a4[0]/d},J=function(a){2==m?o[k]+=a+"\n":g+=a+"\n"},K=function(){I(),J(sprintf("%.2f w",r*d)),v=u,J("BT /F1 "+parseInt(u)+".00 Tf ET")};K();var L=function(a){return a.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")};return{addPage:function(){K()},text:function(a,b,e){v!=u&&(J("BT /F1 "+parseInt(u)+".00 Tf ET"),v=u);var f=sprintf("BT %.2f %.2f Td (%s) Tj ET",a*d,(c-b)*d,L(e));J(f)},setProperties:function(a){t=a},addImage:function(){},output:function(a){return H(),void 0==a?g:void("datauri"==a&&(document.location.href="data:application/pdf;base64,"+Base64.encode(g)))},setFontSize:function(a){u=a}}},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},GraphUtils=angular.module("GraphUtils",["googlechart"]);GraphUtils.factory("Graph",function(){var a=function(){return{cols:[{id:"name",label:"Name",type:"string"},{id:"borrowers",label:"Borrowers",type:"number"}],rows:[{c:[{v:"John S."},{v:149}]},{c:[{v:"Philip L."},{v:255}]},{c:[{v:"Philip R."},{v:475}]},{c:[{v:"John E."},{v:201}]},{c:[{v:"Vincent C."},{v:290}]}]}},b=function(){return{cols:[{id:"name",label:"Name",type:"string"},{id:"borrowers",label:"Borrowers",type:"number"}],rows:[{c:[{v:"John S."},{v:14}]},{c:[{v:"Philip L."},{v:4}]},{c:[{v:"Philip R."},{v:10}]},{c:[{v:"John E."},{v:17}]},{c:[{v:"Vincent C."},{v:3}]}]}},c=function(){return{cols:[{id:"name",label:"Name",type:"string"},{id:"new",label:"New",type:"number"},{id:"roll-over",label:"Roll-over",type:"number"},{id:"repaid",label:"Repaid",type:"number"}],rows:[{c:[{v:"John S."},{v:26},{v:19},{v:12}]},{c:[{v:"Philip L."},{v:37},{v:13},{v:9}]},{c:[{v:"Philip R."},{v:22},{v:29},{v:18}]},{c:[{v:"John E."},{v:15},{v:7},{v:4}]},{c:[{v:"Vincent C."},{v:40},{v:25},{v:12}]}]}};return{getColumnChart:function(d){var e;return"activeBorrowers"==d?e=a():"parPerLoan"==d?e=b():"changesInLoanPortfolio"==d&&(e=c()),{type:"ColumnChart",cssStyle:"height:180px; width:100%;",data:e,options:{colors:["#88cac6","#e28b00","#449acc"],isStacked:"false",fill:20,displayExactValues:!0,vAxis:{gridlines:{count:6}},hAxis:{}},formatters:{},displayed:!0}},getBarChart:function(){return{type:"BarChart",cssStyle:"height:180px; width:100%;",data:{cols:[{id:"month",label:"Month",type:"string",p:{}},{id:"laptop-id",label:"Laptop",type:"number",p:{}},{id:"desktop-id",label:"Desktop",type:"number",p:{}},{id:"server-id",label:"Server",type:"number",p:{}},{id:"cost-id",label:"Shipping",type:"number"}],rows:[{c:[{v:"January"},{v:19,f:"42 items"},{v:12,f:"Ony 12 items"},{v:7,f:"7 servers"},{v:4}]},{c:[{v:"February"},{v:13},{v:1,f:"1 unit (Out of stock this month)"},{v:12},{v:2}]},{c:[{v:"March"},{v:24},{v:0},{v:11},{v:6}]}]},options:{title:"Sales per month",isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:6}},hAxis:{title:"Date"}},formatters:{},displayed:!0}},getLineChart:function(){return{type:"LineChart",cssStyle:"height:180px; width:100%;",data:{cols:[{id:"month",label:"Month",type:"string",p:{}},{id:"laptop-id",label:"Laptop",type:"number",p:{}},{id:"desktop-id",label:"Desktop",type:"number",p:{}},{id:"server-id",label:"Server",type:"number",p:{}},{id:"cost-id",label:"Shipping",type:"number"}],rows:[{c:[{v:"January"},{v:19,f:"42 items"},{v:12,f:"Ony 12 items"},{v:7,f:"7 servers"},{v:4}]},{c:[{v:"February"},{v:13},{v:1,f:"1 unit (Out of stock this month)"},{v:12},{v:2}]},{c:[{v:"March"},{v:24},{v:0},{v:11},{v:6}]}]},options:{title:"Sales per month",isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:6}},hAxis:{title:"Date"}},formatters:{},displayed:!0}},getPieChart:function(){return{type:"PieChart",cssStyle:"height:180px; width:100%;",data:{cols:[{id:"month",label:"Month",type:"string",p:{}},{id:"laptop-id",label:"Laptop",type:"number",p:{}}],rows:[{c:[{v:"Collected"},{v:85}]},{c:[{v:"Due"},{v:15}]}]},options:{colors:["#88cac6","#e28b00"],pieHole:.4,isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:6}},hAxis:{title:"Date"}},formatters:{},displayed:!0}}}});var app=angular.module("angularjsApp",["ngRoute","loginController","dashboardController","clientsController","userServices","Constants"]);app.config(["$routeProvider",function(a){a.when("/",{hclass:"pre-login",templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",data:{authorizedRoles:["admin"]}}).when("/clients",{templateUrl:"views/clients.html",controller:"ClientsCtrl",data:{authorizedRoles:["admin"]}}).when("/loans",{templateUrl:"views/loans.html",controller:"LoansCtrl",data:{authorizedRoles:["admin"]}}).when("/loansPendingApproval",{templateUrl:"views/loansPendingApprovals.html",controller:"LoansPendingApprovalsCtrl",data:{authorizedRoles:["admin"]}}).when("/loansAwaitingDisbursement",{templateUrl:"views/loansAwaitingDisbursement.html",controller:"LoansAwaitingDisbursementCtrl",data:{authorizedRoles:["admin"]}}).when("/loansRejected",{templateUrl:"views/loansRejected.html",controller:"LoansRejectedCtrl",data:{authorizedRoles:["admin"]}}).when("/loansWrittenOff",{templateUrl:"views/loansWrittenOff.html",controller:"LoansWrittenOffCtrl",data:{authorizedRoles:["admin"]}}).otherwise({redirectTo:"/"})}]),app.config(["$httpProvider",function(a){a.defaults.headers.common["X-Mifos-Platform-TenantId"]="default",a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"],a.defaults.headers.common["Content-Type"]="application/json; charset=utf-8"}]),app.run(["$rootScope","$location","AUTH_EVENTS","AuthService","Session","APPLICATION","PAGE_URL",function(a,b,c,d,e,f,g){a.itemsByPage=f.PAGE_SIZE,a.displayedPages=f.DISPLAYED_PAGES,a.page={setHclass:function(a){this.hclass=a}},a.pdfExport=function(a){var b=[];void 0!=a&&-1!=a.indexOf(",")&&(b=a.split(",")),void 0!=a&&-1===a.indexOf(",")&&(b=[a]),$(".table").tableExport({type:"pdf",ignoreColumn:b,escape:"false",pdfFontSize:7,pdfLeftMargin:5})},a.xlsExport=function(a){var b=[];void 0!=a&&-1!=a.indexOf(",")&&(b=a.split(",")),void 0!=a&&-1===a.indexOf(",")&&(b=[a]),$(".table").tableExport({type:"excel",ignoreColumn:b,escape:"false"})},a.$on("$routeChangeSuccess",function(b,c){a.page.setHclass(c.$$route.hclass)}),a.$on("$includeContentLoaded",function(){console.log("includeContentLoaded: includeContentLoaded success!");var a=angular.element("#main-navbar-collapse .nav.navbar-nav:first"),c=a.find("li");switch(c.length>0&&c.each(function(){var a=$(this);a.removeClass("active")}),b.path()){case g.CLIENTS:case g.LOANS:case g.LOANSAWAITINGDISBURSEMENT:case g.LOANSPENDINGAPPROVAL:case g.LOANSREJECTED:case g.LOANSWRITTENOFF:a.find(".clients").parent().addClass("active");break;default:a.find(".home").parent().addClass("active")}}),a.$on("$stateChangeStart",function(b,e){var f=e.data.authorizedRoles;d.isAuthorized(f)||(b.preventDefault(),a.$broadcast(d.isAuthenticated()?c.notAuthorized:c.notAuthenticated))}),a.$on(c.notAuthenticated,function(){b.url(g.ROOT)}),a.$on(c.sessionTimeout,function(){b.url(g.ROOT)}),null!=e.getValue(f.authToken)?(b.path()==g.ROOT||""==b.path())&&b.url(g.DASHBOARD):b.url(g.ROOT)}]),app.config(["$httpProvider",function(a){a.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}])}]),app.factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}]),app.controller("ApplicationController",["$scope","$location","USER_ROLES","AuthService",function(a,b,c,d){a.currentUser=null,a.userRoles=c,a.isAuthorized=d.isAuthorized,a.setCurrentUser=function(b){a.currentUser=b},a.changeView=function(a){b.path(a)}}]),app.factory("Session",["APPLICATION",function(a){var b={create:function(b,c,d){var e={};e[a.authToken]=b,e[a.username]=c,e[a.role]=d,window.localStorage.setItem("ang_session",JSON.stringify(e))},setValue:function(b,c){var d={};try{d=JSON.parse(window.localStorage.getItem(a.sessionName))}catch(e){return console.log("Error to get session data from local storage"),null}d[b]=c,window.localStorage.setItem("ang_session",JSON.stringify(d))},getValue:function(b){var c={};try{return c=JSON.parse(window.localStorage.getItem(a.sessionName)),c[b]}catch(d){return console.log("Error to get session data from local storage"),null}},remove:function(){var b={};window.localStorage.setItem(a.sessionName,JSON.stringify(b))}};return b}]),app.directive("showValidation",[function(){return{restrict:"A",require:"form",link:function(a,b){b.find(".form-group").each(function(){var b=$(this),c=b.find("input[ng-model],textarea[ng-model],select[ng-model]");c.length>0&&c.each(function(){var c=$(this);a.$watch(function(){return c.hasClass("ng-invalid")},function(a){var c=b.find("span");c.length>0&&c.each(function(){var b=$(this);b.toggleClass("glyphicon-remove",a),b.toggleClass("glyphicon-ok",!a)}),b.toggleClass("has-success",!a),b.toggleClass("has-error",a)})})})}}}]),app.filter("status",[function(){var a={0:"status bad",100:"status on-hold",200:"status on-hold",300:"status active",400:"status closed",500:"status closed",600:"status closed",601:"status closed",602:"status active",700:"status active",800:"status active",900:"status active"};return function(b){return a[b]}}]),app.filter("checkEmptyString",[function(){return function(a){return""==a}}]);var utils=angular.module("Utils",[]);utils.factory("Auth",["Base64","$http",function(a){return{setCredentials:function(b,c){a.encode(b+":"+c)}}}]),utils.factory("Utility",function(){return{isUndefinedOrNull:function(a){return!angular.isDefined(a)||null===a}}}),utils.factory("Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!=g&&(h+=String.fromCharCode(d)),64!=j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}});var delegatorServices=angular.module("delegatorServices",["Utils","Constants"]);delegatorServices.factory("Remote",["$http","APPLICATION","Session",function(a,b,c){return{setHeader:function(){a.defaults.headers.common.Authorization="Basic "+c.getValue(b.authToken)},get:function(c){console.log("Delegator GET :"+b.host+c),this.setHeader();var d=a.get(b.host+c,{params:{tenantIdentifier:"default",pretty:!0,genericResultSet:!1}}).success(function(a){return console.log("Success from server"),a}).error(function(){return console.log("Error from server"),null});return d},post:function(c,d){console.log("Delegator POST :"+b.host+c+" -> JSON DATA : "+d);var e=a.post(b.host+c,d).success(function(a){return console.log("Success from server"),a}).error(function(a){return console.log("Error from server > "+a),null});return e},put:function(c,d){console.log("Delegator PUT :"+b.host+c+" -> JSON DATA : "+d),this.setHeader();var e=a.put(b.host+c,d,{withCredentials:!0}).success(function(a){return console.log("Success from server"),a}).error(function(){return console.log("Error from server"),null});return e},"delete":function(c,d){console.log("Delegator DELETE :"+b.host+c),this.setHeader();var e=a.delete(b.host+c,d,{withCredentials:!0}).success(function(a){return console.log("Success from server"),a}).error(function(){return console.log("Error from server"),null});return e}}}]);var userServices=angular.module("userServices",["delegatorServices"]);userServices.factory("AuthService",["$http","$filter","Remote","Session",function(a,b,c,d){return{authentication:function(a){console.log("Authentication service...");var b=c.post(a);return b},logout:function(a){console.log("Logout service...");var b=c.delete(a);return b},isAuthenticated:function(){return!!d.getValue(APPLICATION.authToken)},isAuthorized:function(a){return angular.isArray(a)||(a=[a]),this.isAuthenticated()&&-1!==a.indexOf(d.getValue(APPLICATION.role))}}}]);var dashboardService=angular.module("dashboardService",["delegatorServices"]);dashboardService.factory("DashboardService",["$http","Remote",function(a,b){return{headerStatistics:function(a){console.log("Get total active clients...");var c=b.get(a);return c}}}]);var clientsService=angular.module("clientsService",["delegatorServices"]);clientsService.factory("ClientsService",["$http","Remote",function(a,b){return{getData:function(a){console.log("Get Data using clientsService...");var c=b.get(a);return c}}}]);var LoginCtrl=angular.module("loginController",["userServices","Utils","Constants"]);LoginCtrl.controller("LoginCtrl",["$scope","$rootScope","$location","Auth","AuthService","Utility","AUTH_EVENTS","REST_URL","PAGE_URL","Session","Base64",function(a,b,c,d,e,f,g,h,i,j,k){a.authenticate=function(l){if(console.log("LoginCtrl : authenticate"),a.error=!1,a.loginForm.$valid)if(f.isUndefinedOrNull(l))a.authenticationFail();else{d.setCredentials(l.username,l.password);var m=h.AUTHENTICATION+"?username="+l.username+"&password="+l.password,n=function(a){console.log("Success : Return from login service."),b.$broadcast(g.loginSuccess),j.create(k.encode(l.username+":"+l.password),a.data.username,a.data.roles[0]),c.url(i.DASHBOARD)};e.authentication(m).then(n,a.authenticationFail)}else a.invalidateForm()},a.logout=function(){e.logout(h.AUTHENTICATION).then(function(){j.remove(),c.url(i.ROOT)
},function(){console.log("Error : Return from logout service.")})},a.authenticationFail=function(){console.log("Error : Return from login service."),b.$broadcast(g.loginFailed),a.error=!0},a.invalidateForm=function(){a.loginForm.invalidate=!1},a.clearError=function(){a.loginForm.invalidate=!1}}]);var dashboardCtrl=angular.module("dashboardController",["dashboardService","Constants","GraphUtils"]);dashboardCtrl.controller("DashboardCtrl",["$scope","$rootScope","$location","DashboardService","REST_URL","PAGE_URL","CHART_TYPE","APPLICATION","Session","Graph",function(a,b,c,d,e,f,g,h,i,j){a.loadDashboard=function(){console.log("DashboardCtrl : loadDashboard"),a.username=i.getValue(h.username),a.getHeaderStatistics(),a.borrowerPerLoanOfficer=j.getColumnChart(g.ACTIVE_BORROWERS),a.PARPerLoanOfficer=j.getColumnChart(g.PAR_PER_LOAN),a.loanPortfolioCurrentMonth=j.getColumnChart(g.LOANPORTFOLIO_UPDATES),a.dueVsCollectedLastWeek=j.getPieChart()},a.getHeaderStatistics=function(){console.log("DashboardCtrl : getHomePageHeaderStatic");var b=function(b){console.log("Success : Return from headerStatistics service."),a.totalActiveClient=b.data[0].totalActiveClient,a.totalBorrowers=b.data[0].totalBorrowers,a.loansInBadStanding=b.data[0].loansInBadStanding,a.repaymentsDueThisWeek=b.data[0].repaymentsDueThisWeek},c=function(){console.log("Error : Return from headerStatistics service."),a.totalActiveClient=0,a.totalBorrowers=0,a.loansInBadStanding=0,a.repaymentsDueThisWeek=0};d.headerStatistics(e.DASHBOARD_HEADER_STATISTIC).then(b,c)},a.loadDashboard()}]);var clientsCtrl=angular.module("clientsController",["clientsService","Constants","smart-table"]);clientsCtrl.controller("ClientsCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("ClientsCtrl : loadClients");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from allClients service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.ALL_CLIENTS).then(g,h)},2e3)};i()}]),clientsCtrl.controller("LoansCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("LoansCtrl : Loans");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from allLoansFail service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.LOANS).then(g,h)},2e3)};i()}]),clientsCtrl.controller("LoansPendingApprovalsCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("LoansPendingApprovalsCtrl : LoansPendingApprovals");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from allLoansPendingApprovalsFail service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.LOANS_PENDING_APPROVALS).then(g,h)},2e3)};i()}]),clientsCtrl.controller("LoansAwaitingDisbursementCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("LoansAwaitingDisbursementCtrl : LoansAwaitingDisbursement");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from allLoansAwaitingDisbursemensFail service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.LOANS_AWAITING_DISBURSEMENT).then(g,h)},2e3)};i()}]),clientsCtrl.controller("LoansRejectedCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("LoansRejectedCtrl : LoansRejected");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from LoansRejected service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.LOANS_REJECTED).then(g,h)},2e3)};i()}]),clientsCtrl.controller("LoansWrittenOffCtrl",["$scope","$rootScope","$location","$timeout","ClientsService","REST_URL","APPLICATION",function(a,b,c,d,e,f){console.log("LoansWrittenOffCtrl : LoansWrittenOff");a.isLoading=!1,a.rowCollection=[],a.displayed=[];var g=function(b){a.isLoading=!1;try{a.rowCollection=b.data}catch(c){}},h=function(){a.isLoading=!1,console.log("Error : Return from LoansWrittenOff service.")},i=function(){a.isLoading=!0,d(function(){a.rowCollection=[],e.getData(f.LOANS_WRITTEN_OFF).then(g,h)},2e3)};i()}]);